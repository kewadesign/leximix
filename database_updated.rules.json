{
    "rules": {
        "system": { ".read": true, ".write": false },
        "vouchers": {
            ".read": true,
            "$voucherCode": {
                ".write": false,
                "usedBy": {
                    "$username": {
                        ".write": "!data.exists()",
                        ".validate": "newData.isNumber()"
                    }
                }
            }
        },
        "users": {
            "$username": {
                ".read": true,
                ".write": true,
                ".validate": "$username.matches(/^[a-zA-Z0-9]+$/) && $username.length >= 3 && $username.length <= 30",
                "password": { ".write": "!data.exists()" },
                "coins": { ".validate": "newData.isNumber() && newData.val() >= 0" },
                "xp": { ".validate": "newData.isNumber() && newData.val() >= 0" },
                "level": { ".validate": "newData.isNumber() && newData.val() >= 1" },
                "isPremium": { ".validate": "newData.isBoolean()" },
                "premiumActivatedAt": { ".validate": "newData.isNumber()" },
                "saves": { ".write": true },
                "voucherRewards": { ".write": true }
            }
        }
    }
}
